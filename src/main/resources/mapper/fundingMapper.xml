<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.ggumteo.mapper.funding.FundingMapper">
    <select id="selectByMemberId" resultType="fundingDTO">
        select "id", "genre_type", "post_title", "post_content", "post_type", "member_profile_id", "created_date", "updated_date", "profile_nickname", "member_id", "profile_img_url", "thumbnail_file_name", "thumbnail_file_path", "thumbnail_file_id"
        from view_my_funding
        where post_type = #{postType} and member_id = #{memberId}
        limit #{workAndFundingPagination.startRow}, #{workAndFundingPagination.rowCount};
    </select>

    <select id="selectCount">
        select count(*) from tbl_funding f
        join tbl_post p on f.id = p.id and p.post_type = #{postType}
        join tbl_member_profile mp on p.member_profile_id = mp.id
        join tbl_member m on mp.member_id = m.id and m.id = #{memberId};
    </select>

    <select id="selectById" resultType="fundingDTO">
        select f.id, f.genre_type, f.investor_number, f.target_price, f.converge_price, f.funding_status, f.file_content
        from tbl_funding f join tbl_post p
        on f.id = p.id and f.id = #{id} and p.post_type = #{postType}
    </select>
</mapper>